\hypertarget{classow__sm_1_1StateMachine}{}\section{ow\+\_\+sm\+:\+:State\+Machine Class Reference}
\label{classow__sm_1_1StateMachine}\index{ow\+\_\+sm\+::\+State\+Machine@{ow\+\_\+sm\+::\+State\+Machine}}


The \hyperlink{classow__sm_1_1StateMachine}{State\+Machine} class.  




{\ttfamily \#include $<$state\+\_\+machine.\+h$>$}

Inheritance diagram for ow\+\_\+sm\+:\+:State\+Machine\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{db/d75/classow__sm_1_1StateMachine}
\end{center}
\end{figure}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
typedef \hyperlink{classow_1_1GenericModuleBase}{ow\+::\+Generic\+Module\+Base} {\bfseries Base}\hypertarget{classow__sm_1_1StateMachine_afbeeb17d101f845ed20e301bed356dff}{}\label{classow__sm_1_1StateMachine_afbeeb17d101f845ed20e301bed356dff}

\item 
typedef \hyperlink{classow__core_1_1Flags}{ow\+::\+Flags} {\bfseries Flags}\hypertarget{classow__sm_1_1StateMachine_a6632a0818053052153eac86ea73bdd73}{}\label{classow__sm_1_1StateMachine_a6632a0818053052153eac86ea73bdd73}

\item 
typedef \hyperlink{classow__core_1_1Flags_a97da2cfc7e3e4b51aac33116f914bd2b}{ow\+::\+Flags\+::\+Event\+In} {\bfseries Event\+In}\hypertarget{classow__sm_1_1StateMachine_a395304bddccab6b47dac39d4cab02e50}{}\label{classow__sm_1_1StateMachine_a395304bddccab6b47dac39d4cab02e50}

\item 
typedef \hyperlink{classow__core_1_1Flags_a97da2cfc7e3e4b51aac33116f914bd2b}{ow\+::\+Flags\+::\+Event\+In} {\bfseries Event\+Out}\hypertarget{classow__sm_1_1StateMachine_abfe32db2dad751bea3b70118d1e84e80}{}\label{classow__sm_1_1StateMachine_abfe32db2dad751bea3b70118d1e84e80}

\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classow__sm_1_1StateMachine_a4b026f2f193c1c69db33ba719d6bb4ad}{State\+Machine} ()\hypertarget{classow__sm_1_1StateMachine_a4b026f2f193c1c69db33ba719d6bb4ad}{}\label{classow__sm_1_1StateMachine_a4b026f2f193c1c69db33ba719d6bb4ad}

\begin{DoxyCompactList}\small\item\em \hyperlink{classow__sm_1_1StateMachine}{State\+Machine} Default constructor. \end{DoxyCompactList}\item 
void \hyperlink{classow__sm_1_1StateMachine_a84a76bd18c7d4c6c6c043ef908976498}{start} (const ros\+::\+Time \&time)
\begin{DoxyCompactList}\small\item\em initialize timer before update call \end{DoxyCompactList}\item 
const \hyperlink{classow__core_1_1Flags}{ow\+::\+Flags} \& \hyperlink{classow__sm_1_1StateMachine_a7040a24046ac224b73bca458b1107fc8}{update} (const \hyperlink{classow__core_1_1Flags}{ow\+::\+Flags} \&flags, const ros\+::\+Time \&time, const ros\+::\+Duration \&dt)
\begin{DoxyCompactList}\small\item\em performs update step of the module, called periodically \end{DoxyCompactList}\item 
const \hyperlink{classow__core_1_1Flags}{ow\+::\+Flags} \& {\bfseries flags} () const \hypertarget{classow__sm_1_1StateMachine_a541854a5a1ecbe4ca8ffbd397d56ab2b}{}\label{classow__sm_1_1StateMachine_a541854a5a1ecbe4ca8ffbd397d56ab2b}

\item 
\hyperlink{classow__core_1_1Flags}{ow\+::\+Flags} \& {\bfseries flags} ()\hypertarget{classow__sm_1_1StateMachine_a930a10a04092b6a87b6f5cb9a9e79472}{}\label{classow__sm_1_1StateMachine_a930a10a04092b6a87b6f5cb9a9e79472}

\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual bool \hyperlink{classow__sm_1_1StateMachine_a5bc07d8178b35935cc963a7015a30318}{init} (const \hyperlink{classow_1_1Parameter}{ow\+::\+Parameter} \&parameter, ros\+::\+Node\+Handle \&nh)\hypertarget{classow__sm_1_1StateMachine_a5bc07d8178b35935cc963a7015a30318}{}\label{classow__sm_1_1StateMachine_a5bc07d8178b35935cc963a7015a30318}

\begin{DoxyCompactList}\small\item\em Initialization of \hyperlink{classow__sm_1_1StateMachine}{State\+Machine} module. \end{DoxyCompactList}\item 
size\+\_\+t \hyperlink{classow__sm_1_1StateMachine_afce26234a58017b9717cdaafb124066e}{step} (size\+\_\+t state, const ros\+::\+Duration \&elapsed)
\begin{DoxyCompactList}\small\item\em takes the current state and computes the next one. \end{DoxyCompactList}\item 
void \hyperlink{classow__sm_1_1StateMachine_a9c87da3cb1f98fb9f8923631b113bab2}{process\+Transitions} (size\+\_\+t state, size\+\_\+t state\+\_\+prev, const ros\+::\+Time \&time)
\begin{DoxyCompactList}\small\item\em processes code that happend at the transitions of states \end{DoxyCompactList}\item 
void \hyperlink{classow__sm_1_1StateMachine_a4d054388f3a4e4293ef09f681e675a18}{process\+States} (size\+\_\+t state, const ros\+::\+Time \&time)
\begin{DoxyCompactList}\small\item\em processes tasks that are executed during a state \end{DoxyCompactList}\item 
void \hyperlink{classow__sm_1_1StateMachine_a5353575902af2621c96418cc371ca867}{update\+Time} (const ros\+::\+Time \&time)
\begin{DoxyCompactList}\small\item\em updates the timing of the step phases \end{DoxyCompactList}\item 
void \hyperlink{classow__sm_1_1StateMachine_a7b2de8e2394c4051422dca148d2a1d38}{print\+Flags} ()
\begin{DoxyCompactList}\small\item\em print the statemachine status. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classow__core_1_1Flags}{Flags} \hyperlink{classow__sm_1_1StateMachine_ad6f8f80ee6056850928f25f7dcc4d315}{flags\+\_\+}\hypertarget{classow__sm_1_1StateMachine_ad6f8f80ee6056850928f25f7dcc4d315}{}\label{classow__sm_1_1StateMachine_ad6f8f80ee6056850928f25f7dcc4d315}

\begin{DoxyCompactList}\small\item\em the flags container \end{DoxyCompactList}\item 
size\+\_\+t \hyperlink{classow__sm_1_1StateMachine_a499be047d9a1274f91aa770c5b52f3fc}{state\+\_\+}\hypertarget{classow__sm_1_1StateMachine_a499be047d9a1274f91aa770c5b52f3fc}{}\label{classow__sm_1_1StateMachine_a499be047d9a1274f91aa770c5b52f3fc}

\begin{DoxyCompactList}\small\item\em current state \end{DoxyCompactList}\item 
size\+\_\+t \hyperlink{classow__sm_1_1StateMachine_abf078207bbdaec20649ded61d44a9a0e}{state\+\_\+prev\+\_\+}\hypertarget{classow__sm_1_1StateMachine_abf078207bbdaec20649ded61d44a9a0e}{}\label{classow__sm_1_1StateMachine_abf078207bbdaec20649ded61d44a9a0e}

\begin{DoxyCompactList}\small\item\em previous state \end{DoxyCompactList}\item 
\hyperlink{classow__sm_1_1EventInQueue}{Event\+In\+Queue} \hyperlink{classow__sm_1_1StateMachine_a9c72eaa3d0277aec76d1efae87d34e7a}{events\+\_\+}\hypertarget{classow__sm_1_1StateMachine_a9c72eaa3d0277aec76d1efae87d34e7a}{}\label{classow__sm_1_1StateMachine_a9c72eaa3d0277aec76d1efae87d34e7a}

\begin{DoxyCompactList}\small\item\em queue of incoming events \end{DoxyCompactList}\item 
ros\+::\+Time \hyperlink{classow__sm_1_1StateMachine_aff6b6c771cf017aa68f760b5209b651e}{t0\+\_\+}\hypertarget{classow__sm_1_1StateMachine_aff6b6c771cf017aa68f760b5209b651e}{}\label{classow__sm_1_1StateMachine_aff6b6c771cf017aa68f760b5209b651e}

\begin{DoxyCompactList}\small\item\em start time of a step \end{DoxyCompactList}\item 
ros\+::\+Time \hyperlink{classow__sm_1_1StateMachine_aeaf5f4553b6618be773e5d5f19b49356}{t0\+\_\+ss\+\_\+}\hypertarget{classow__sm_1_1StateMachine_aeaf5f4553b6618be773e5d5f19b49356}{}\label{classow__sm_1_1StateMachine_aeaf5f4553b6618be773e5d5f19b49356}

\begin{DoxyCompactList}\small\item\em start time of single support phase \end{DoxyCompactList}\item 
ros\+::\+Duration \hyperlink{classow__sm_1_1StateMachine_a896db8635425ef4f7f2671d669ea0c31}{ds\+\_\+dur\+\_\+}\hypertarget{classow__sm_1_1StateMachine_a896db8635425ef4f7f2671d669ea0c31}{}\label{classow__sm_1_1StateMachine_a896db8635425ef4f7f2671d669ea0c31}

\begin{DoxyCompactList}\small\item\em duration of double support \end{DoxyCompactList}\item 
ros\+::\+Duration \hyperlink{classow__sm_1_1StateMachine_acdd8535be563348c9aaa161e41aabab9}{ss\+\_\+dur\+\_\+}\hypertarget{classow__sm_1_1StateMachine_acdd8535be563348c9aaa161e41aabab9}{}\label{classow__sm_1_1StateMachine_acdd8535be563348c9aaa161e41aabab9}

\begin{DoxyCompactList}\small\item\em duration of single support \end{DoxyCompactList}\item 
ros\+::\+Duration \hyperlink{classow__sm_1_1StateMachine_ac276a7775c94680eee18ff5e69b66718}{t\+\_\+ss\+\_\+}\hypertarget{classow__sm_1_1StateMachine_ac276a7775c94680eee18ff5e69b66718}{}\label{classow__sm_1_1StateMachine_ac276a7775c94680eee18ff5e69b66718}

\begin{DoxyCompactList}\small\item\em start time for single support \end{DoxyCompactList}\item 
ros\+::\+Duration \hyperlink{classow__sm_1_1StateMachine_aa05d3a6204f18d31042859a4f7bb990e}{t\+\_\+ds\+\_\+}\hypertarget{classow__sm_1_1StateMachine_aa05d3a6204f18d31042859a4f7bb990e}{}\label{classow__sm_1_1StateMachine_aa05d3a6204f18d31042859a4f7bb990e}

\begin{DoxyCompactList}\small\item\em start time for double support \end{DoxyCompactList}\item 
ros\+::\+Duration \hyperlink{classow__sm_1_1StateMachine_a360fda8e32b133bbe0a7f3536794ff2a}{t\+\_\+step\+\_\+}\hypertarget{classow__sm_1_1StateMachine_a360fda8e32b133bbe0a7f3536794ff2a}{}\label{classow__sm_1_1StateMachine_a360fda8e32b133bbe0a7f3536794ff2a}

\begin{DoxyCompactList}\small\item\em stop time for a complete step \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
The \hyperlink{classow__sm_1_1StateMachine}{State\+Machine} class. 

This class implements the \hyperlink{classow__sm_1_1StateMachine}{State\+Machine} module of the openwalker framework. It keeps track of the timing required for the different step phases and populates the ow\+::\+Flags Container. ow\+::\+Flags contains the current state of the statemachine and Events that are active for one cycle.

Event\+Out is an outgoing event (from the statemachine) and active for one cycle Event\+In is an incoming event that can trigger state changes. 

\subsection{Member Function Documentation}
\index{ow\+\_\+sm\+::\+State\+Machine@{ow\+\_\+sm\+::\+State\+Machine}!print\+Flags@{print\+Flags}}
\index{print\+Flags@{print\+Flags}!ow\+\_\+sm\+::\+State\+Machine@{ow\+\_\+sm\+::\+State\+Machine}}
\subsubsection[{\texorpdfstring{print\+Flags()}{printFlags()}}]{\setlength{\rightskip}{0pt plus 5cm}void ow\+\_\+sm\+::\+State\+Machine\+::print\+Flags (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classow__sm_1_1StateMachine_a7b2de8e2394c4051422dca148d2a1d38}{}\label{classow__sm_1_1StateMachine_a7b2de8e2394c4051422dca148d2a1d38}


print the statemachine status. 

This function is useful for debugging \index{ow\+\_\+sm\+::\+State\+Machine@{ow\+\_\+sm\+::\+State\+Machine}!process\+States@{process\+States}}
\index{process\+States@{process\+States}!ow\+\_\+sm\+::\+State\+Machine@{ow\+\_\+sm\+::\+State\+Machine}}
\subsubsection[{\texorpdfstring{process\+States(size\+\_\+t state, const ros\+::\+Time \&time)}{processStates(size_t state, const ros::Time &time)}}]{\setlength{\rightskip}{0pt plus 5cm}void ow\+\_\+sm\+::\+State\+Machine\+::process\+States (
\begin{DoxyParamCaption}
\item[{size\+\_\+t}]{state, }
\item[{const ros\+::\+Time \&}]{time}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classow__sm_1_1StateMachine_a4d054388f3a4e4293ef09f681e675a18}{}\label{classow__sm_1_1StateMachine_a4d054388f3a4e4293ef09f681e675a18}


processes tasks that are executed during a state 


\begin{DoxyParams}{Parameters}
{\em state} & \\
\hline
{\em state\+\_\+prev} & \\
\hline
{\em time} & \\
\hline
\end{DoxyParams}
\index{ow\+\_\+sm\+::\+State\+Machine@{ow\+\_\+sm\+::\+State\+Machine}!process\+Transitions@{process\+Transitions}}
\index{process\+Transitions@{process\+Transitions}!ow\+\_\+sm\+::\+State\+Machine@{ow\+\_\+sm\+::\+State\+Machine}}
\subsubsection[{\texorpdfstring{process\+Transitions(size\+\_\+t state, size\+\_\+t state\+\_\+prev, const ros\+::\+Time \&time)}{processTransitions(size_t state, size_t state_prev, const ros::Time &time)}}]{\setlength{\rightskip}{0pt plus 5cm}void ow\+\_\+sm\+::\+State\+Machine\+::process\+Transitions (
\begin{DoxyParamCaption}
\item[{size\+\_\+t}]{state, }
\item[{size\+\_\+t}]{state\+\_\+prev, }
\item[{const ros\+::\+Time \&}]{time}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classow__sm_1_1StateMachine_a9c87da3cb1f98fb9f8923631b113bab2}{}\label{classow__sm_1_1StateMachine_a9c87da3cb1f98fb9f8923631b113bab2}


processes code that happend at the transitions of states 


\begin{DoxyParams}{Parameters}
{\em state} & \\
\hline
{\em state\+\_\+prev} & \\
\hline
{\em time} & \\
\hline
\end{DoxyParams}
\index{ow\+\_\+sm\+::\+State\+Machine@{ow\+\_\+sm\+::\+State\+Machine}!start@{start}}
\index{start@{start}!ow\+\_\+sm\+::\+State\+Machine@{ow\+\_\+sm\+::\+State\+Machine}}
\subsubsection[{\texorpdfstring{start(const ros\+::\+Time \&time)}{start(const ros::Time &time)}}]{\setlength{\rightskip}{0pt plus 5cm}void ow\+\_\+sm\+::\+State\+Machine\+::start (
\begin{DoxyParamCaption}
\item[{const ros\+::\+Time \&}]{time}
\end{DoxyParamCaption}
)}\hypertarget{classow__sm_1_1StateMachine_a84a76bd18c7d4c6c6c043ef908976498}{}\label{classow__sm_1_1StateMachine_a84a76bd18c7d4c6c6c043ef908976498}


initialize timer before update call 


\begin{DoxyParams}{Parameters}
{\em time} & \\
\hline
\end{DoxyParams}
\index{ow\+\_\+sm\+::\+State\+Machine@{ow\+\_\+sm\+::\+State\+Machine}!step@{step}}
\index{step@{step}!ow\+\_\+sm\+::\+State\+Machine@{ow\+\_\+sm\+::\+State\+Machine}}
\subsubsection[{\texorpdfstring{step(size\+\_\+t state, const ros\+::\+Duration \&elapsed)}{step(size_t state, const ros::Duration &elapsed)}}]{\setlength{\rightskip}{0pt plus 5cm}size\+\_\+t ow\+\_\+sm\+::\+State\+Machine\+::step (
\begin{DoxyParamCaption}
\item[{size\+\_\+t}]{state, }
\item[{const ros\+::\+Duration \&}]{elapsed}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classow__sm_1_1StateMachine_afce26234a58017b9717cdaafb124066e}{}\label{classow__sm_1_1StateMachine_afce26234a58017b9717cdaafb124066e}


takes the current state and computes the next one. 


\begin{DoxyParams}{Parameters}
{\em state} & \\
\hline
{\em elapsed} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size\+\_\+t 
\end{DoxyReturn}
\index{ow\+\_\+sm\+::\+State\+Machine@{ow\+\_\+sm\+::\+State\+Machine}!update@{update}}
\index{update@{update}!ow\+\_\+sm\+::\+State\+Machine@{ow\+\_\+sm\+::\+State\+Machine}}
\subsubsection[{\texorpdfstring{update(const ow\+::\+Flags \&flags, const ros\+::\+Time \&time, const ros\+::\+Duration \&dt)}{update(const ow::Flags &flags, const ros::Time &time, const ros::Duration &dt)}}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf ow\+::\+Flags}\& ow\+\_\+sm\+::\+State\+Machine\+::update (
\begin{DoxyParamCaption}
\item[{const {\bf ow\+::\+Flags} \&}]{flags, }
\item[{const ros\+::\+Time \&}]{time, }
\item[{const ros\+::\+Duration \&}]{dt}
\end{DoxyParamCaption}
)}\hypertarget{classow__sm_1_1StateMachine_a7040a24046ac224b73bca458b1107fc8}{}\label{classow__sm_1_1StateMachine_a7040a24046ac224b73bca458b1107fc8}


performs update step of the module, called periodically 


\begin{DoxyParams}{Parameters}
{\em flags} & the current status flags of the robot \\
\hline
{\em time} & the current robot time \\
\hline
{\em dt} & the elapsed time since last update call \\
\hline
\end{DoxyParams}
\index{ow\+\_\+sm\+::\+State\+Machine@{ow\+\_\+sm\+::\+State\+Machine}!update\+Time@{update\+Time}}
\index{update\+Time@{update\+Time}!ow\+\_\+sm\+::\+State\+Machine@{ow\+\_\+sm\+::\+State\+Machine}}
\subsubsection[{\texorpdfstring{update\+Time(const ros\+::\+Time \&time)}{updateTime(const ros::Time &time)}}]{\setlength{\rightskip}{0pt plus 5cm}void ow\+\_\+sm\+::\+State\+Machine\+::update\+Time (
\begin{DoxyParamCaption}
\item[{const ros\+::\+Time \&}]{time}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\hypertarget{classow__sm_1_1StateMachine_a5353575902af2621c96418cc371ca867}{}\label{classow__sm_1_1StateMachine_a5353575902af2621c96418cc371ca867}


updates the timing of the step phases 


\begin{DoxyParams}{Parameters}
{\em time} & \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/home/flo/work/ros/workspaces/ow\+\_\+ws/src/ow\+\_\+state\+\_\+machine/include/ow\+\_\+state\+\_\+machine/\hyperlink{state__machine_8h}{state\+\_\+machine.\+h}\end{DoxyCompactItemize}
